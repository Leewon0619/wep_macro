# 메시지 프로토콜

## Envelope
```json
{
  "type": "RUN_START_REQ",
  "requestId": "uuid",
  "source": "WEBAPP",
  "target": "BG",
  "timestamp": 1730000000000,
  "payload": {}
}
```

규칙:
- 요청 `*_REQ`
- 응답 `*_RES`
- 이벤트 `*_EVT`
- 응답은 동일 `requestId` 사용

## 타입
- `EXT_PING_REQ/RES`
- `EXT_GET_PERMISSIONS_REQ/RES`
- `EXT_REQUEST_HOST_PERMISSION_REQ/RES`
- `REC_START_REQ/RES`, `REC_STOP_REQ/RES`, `REC_EVENT_EVT`
- `RUN_START_REQ/RES`, `RUN_PAUSE_REQ/RES`, `RUN_RESUME_REQ/RES`, `RUN_STOP_REQ/RES`
- `RUN_STATUS_EVT`, `RUN_LOG_EVT`, `RUN_END_EVT`
- `SCREENREC_START_REQ/RES`, `SCREENREC_STOP_REQ/RES`, `SCREENREC_MARK_EVT`

## 실패 코드
- `E_DOMAIN_NOT_ALLOWED`
- `E_SELECTOR_NOT_FOUND`
- `E_VERIFY_FAILED`
- `E_TIMEOUT`
- `E_NOT_INTERACTABLE`
- `E_NAVIGATION_CHANGED`
- `E_POLICY_RATE_LIMIT`
- `E_GUARD_MAX_DURATION`
- `E_GUARD_MAX_STEPS`
- `E_USER_STOP`
